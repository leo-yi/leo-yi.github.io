<h2 id="pear_title">PEAR 介绍</h2>

<p><a href="https://pear.php.net/">PEAR</a> 是另一个常用的依赖包管理器, 它跟 Composer 很类似，但是也有一些显著的区别。</p>

<p>PEAR 需要扩展包有专属的结构, 开发者在开发扩展包的时候要提前考虑为 PEAR 定制, 否则后面将无法使用 PEAR.</p>

<p>PEAR 安装扩展包的时候, 是全局安装的, 意味着一旦安装了某个扩展包, 同一台服务器上的所有项目都能用上, 当然, 好处是当多个项目共同使用同一个扩展包的同一个版本, 坏处是如果你需要使用不同版本的话, 就会产生冲突.</p>

<h3 id="pear">如何安装 PEAR</h3>

<p>你可以通过下载 <code>.phar</code> 文件来安装 PEAR. <a href="https://pear.php.net/manual/installation.getting.php">官方文档安装部分</a> 里面有不同系统中安装 PEAR 的详细信息.</p>

<p>如果你是使用 Linux, 你可以尝试找下系统应用管理器, 举个栗子, Debian 和 Ubuntu 有个 <code>php-pear</code> 的 apt 安装包.</p>

<h3 id="section">如何安装扩展包</h3>

<p>如果扩展包是在 <a href="https://pear.php.net/packages.php">PEAR packages list</a> 这个列表里面的, 你可以使用以下命令安装:</p>

<div class="highlight"><pre><code class="language-console" data-lang="console"><span class="go">pear install foo</span></code></pre></div>

<p>如果扩展包是托管到别的渠道上, 你需要 <code>发现 (discover)</code> 渠道先, 请见文档 <a href="https://pear.php.net/manual/guide.users.commandline.channels.php">使用渠道</a>.</p>

<ul>
  <li><a href="https://pear.php.net/">关于 PEAR 的学习</a></li>
</ul>

<h3 id="composer--pear-">使用 Composer 来安装 PEAR 扩展包</h3>

<p>如果你正在使用 <a href="/#composer_and_packagist">Composer</a>, 并且你想使用一些 PEAR 的代码, 你可以通过 Composer 来安装 PEAR 扩展包.</p>

<p>下面是从 <code>pear2.php.net</code> 安装代码依赖的示例:</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="s2">"repositories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pear"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pear2.php.net"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"pear-pear2/PEAR2_Text_Markdown"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pear-pear2/PEAR2_HTTP_Request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></div>

<p>第一部分 <code>"repositories"</code> 是让 Composer 从哪个渠道去获取扩展包, 然后, <code>"require"</code> 部分使用下面的命名规范:</p>

<blockquote>
  <p>pear-channel/Package</p>
</blockquote>

<p>前缀 “pear” 是为了避免冲突写死的，因为 <code>pear-channel</code> 有可能是任意扩展包名称，所以 <code>channel</code> 的简称（或者是完整 URL）可以用来指引扩展包在哪个 <code>channel</code> 里。</p>

<p>成功安装扩展包以后, 代码会放到项目的 <code>vendor</code> 文件夹中, 并且可以通过加载 Composer 的自动加载器进行加载:</p>

<blockquote>
  <p>vendor/pear-pear2.php.net/PEAR2_HTTP_Request/pear2/HTTP/Request.php</p>
</blockquote>

<p>在代码里面可以这样使用:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">pear2\HTTP\Request</span><span class="p">();</span></code></pre></div>

<ul>
  <li><a href="http://getcomposer.org/doc/05-repositories.md#pear">学习更多 PEAR 和 Composer 的使用</a></li>
</ul>

